<?php function countAllPages():int{global $db;$q="SELECT * FROM pages WHERE deleted = 0";if($r=$db->query($q)){return $r->num_rows;}}function countOfSubpages($pid):int{global $db;$query="SELECT id FROM pages WHERE deleted = 0 AND parentid = $pid";if($res=$db->query($query)){return $res->num_rows;}}function getAllSubpages($pid,$it):string{global $db;$pageslist="";$query="SELECT * FROM pages WHERE deleted = 0 AND parentid = $pid";if($res=$db->query($query)){if($res->num_rows>0){while($row=$res->fetch_assoc()){$dropdownuuid=random_int(-(2 ** 31),2 ** 31-1);$item="<div class='page-row-subchild' style='margin-left: ".($it*10)."px;'>\n                    <div class='page-row-top'>\n                        <div class='page-row-left'>\n                            <header class='page-name'>".$row['name']."</header> \n                            <button class='roll-dropdown-button ".(countOfSubpages($row["id"])==0?'disabled__dropdown':'')."' data-dropdown-id='".$dropdownuuid."'> <em class='fas ".(countOfSubpages($row["id"])==0?'gray_icon__dropdown':'')." fa-chevron-down subchilds-navigation-down'></em> </button>\n                        </div>\n                        <div class='page-row-right'>\n                            <button class='btn-edit-page' data-pageid='".$row['id']."'><em class='fas fa-pen'></em></button>\n                            <button class='btn-remove-page' data-pageid='".$row['id']."'><em class='fas fa-trash'></em></button>\n                            <button class='btn-add-subpage' data-pageid='".$row['id']."'><em class='fas fa-plus'></em></button>\n                        </div>\n                    </div>\n                    <div class='subpages-container-cx00-dropdown' data-dropdownid='".$dropdownuuid."'>\n                        ".getAllSubpages($row['id'],$it+1)."\n                    </div>\n                </div>";$pageslist.=$item;}}}return $pageslist;}